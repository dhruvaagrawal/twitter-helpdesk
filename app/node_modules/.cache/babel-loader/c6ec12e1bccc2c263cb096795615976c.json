{"ast":null,"code":"import _toConsumableArray from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _regeneratorRuntime from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useContext,useState,useEffect,useRef}from'react';import{Card,Table,Tag,Tooltip,message,Typography,Button,Input,Form}from'antd';import{EyeOutlined,DeleteOutlined}from'@ant-design/icons';import moment from'moment';import UserView from'./UserView';import AvatarStatus from'components/shared-components/AvatarStatus';import userData from\"assets/data/user-list.data.json\";var Title=Typography.Title;var EditableContext=React.createContext();var EditableRow=function EditableRow(_ref){var index=_ref.index,props=_objectWithoutProperties(_ref,[\"index\"]);var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];return/*#__PURE__*/React.createElement(Form,{form:form,component:false},/*#__PURE__*/React.createElement(EditableContext.Provider,{value:form},/*#__PURE__*/React.createElement(\"tr\",props)));};var EditableCell=function EditableCell(_ref2){var title=_ref2.title,editable=_ref2.editable,children=_ref2.children,dataIndex=_ref2.dataIndex,record=_ref2.record,handleSave=_ref2.handleSave,restProps=_objectWithoutProperties(_ref2,[\"title\",\"editable\",\"children\",\"dataIndex\",\"record\",\"handleSave\"]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var inputRef=useRef();var form=useContext(EditableContext);useEffect(function(){if(editing){inputRef.current.focus();}},[editing]);var toggleEdit=function toggleEdit(){setEditing(!editing);form.setFieldsValue(_defineProperty({},dataIndex,record[dataIndex]));};var save=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return form.validateFields();case 3:values=_context.sent;toggleEdit();handleSave(_objectSpread(_objectSpread({},record),values));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('Save failed:',_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function save(_x){return _ref3.apply(this,arguments);};}();var childNode=children;if(editable){childNode=editing?/*#__PURE__*/React.createElement(Form.Item,{style:{margin:0},name:dataIndex,rules:[{required:true,message:\"\".concat(title,\" is required.\")}]},/*#__PURE__*/React.createElement(Input,{ref:inputRef,onPressEnter:save,onBlur:save})):/*#__PURE__*/React.createElement(\"div\",{className:\"editable-cell-value-wrap\",style:{paddingRight:24},onClick:toggleEdit},children);}return/*#__PURE__*/React.createElement(\"td\",restProps,childNode);};var EditableTable=/*#__PURE__*/function(_React$Component){_inherits(EditableTable,_React$Component);var _super=_createSuper(EditableTable);function EditableTable(){var _this;_classCallCheck(this,EditableTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.columns=[{title:'User',dataIndex:'name',render:function render(_,record){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(AvatarStatus,{src:record.img,name:record.name,subTitle:record.id+\"@spocto.com\"}));},sorter:{compare:function compare(a,b){a=a.name.toLowerCase();b=b.name.toLowerCase();return a>b?-1:b>a?1:0;}},editable:true},{title:'Role',render:function render(role){return/*#__PURE__*/React.createElement(Tag,{className:\"text-capitalize\",color:role.role==='Admin'?'red':role.role==='Executive'?'blue':'cyan'},role.role);},sorter:{compare:function compare(a,b){return a.role.length-b.role.length;}}},{title:'Last online',dataIndex:'lastOnline',render:function render(date){return/*#__PURE__*/React.createElement(Tag,{color:'magenta'},moment.unix(date).format(\"MM/DD/YYYY\"));},sorter:function sorter(a,b){return moment(a.lastOnline).unix()-moment(b.lastOnline).unix();}},{title:'Phone Number',dataIndex:'personalInfo',render:function render(role){return/*#__PURE__*/React.createElement(Tag,{className:\"text-capitalize\",color:'gold'},role.phoneNumber);},sorter:{compare:function compare(a,b){return a.personalInfo.phoneNumber.length-b.personalInfo.phoneNumber.length;}}},{title:'View User Info',dataIndex:'view',render:function render(_,elm){return/*#__PURE__*/React.createElement(Tooltip,{title:\"View\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",className:\"mr-2\",icon:/*#__PURE__*/React.createElement(EyeOutlined,null),onClick:function onClick(){_this.showUserProfile(elm);},size:\"small\"}));}},{title:'Delete',dataIndex:'delete',render:function render(text,record){return _this.state.dataSource.length>=1?/*#__PURE__*/React.createElement(Button,{danger:true,icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),onClick:function onClick(){_this.deleteUser(record.id);},size:\"small\"}):null;}}];_this.state={dataSource:userData,count:2,userProfileVisible:false,selectedUser:null};_this.showUserProfile=function(userInfo){_this.setState({userProfileVisible:true,selectedUser:userInfo});};_this.closeUserProfile=function(){_this.setState({userProfileVisible:false,selectedUser:null});};_this.deleteUser=function(key){var dataSource=_toConsumableArray(_this.state.dataSource);_this.setState({dataSource:dataSource.filter(function(item){return item.id!==key;})});message.success({content:\"Deleted user \".concat(key),duration:2});};_this.handleAdd=function(){var _this$state=_this.state,count=_this$state.count,dataSource=_this$state.dataSource;var newData={key:count,name:\"Edward King \".concat(count),role:'Executive',address:\"London, Park Lane no. \".concat(count)};_this.setState({dataSource:[].concat(_toConsumableArray(dataSource),[newData]),count:count+1});};_this.handleSave=function(row){var newData=_toConsumableArray(_this.state.dataSource);var index=newData.findIndex(function(item){return row.key===item.key;});var item=newData[index];newData.splice(index,1,_objectSpread(_objectSpread({},item),row));_this.setState({dataSource:newData});};return _this;}_createClass(EditableTable,[{key:\"render\",value:function render(){var _this2=this;var dataSource=this.state.dataSource;var components={body:{row:EditableRow,cell:EditableCell}};var _this$state2=this.state,users=_this$state2.users,userProfileVisible=_this$state2.userProfileVisible,selectedUser=_this$state2.selectedUser;var columns=this.columns.map(function(col){if(!col.editable){return col;}return _objectSpread(_objectSpread({},col),{},{onCell:function onCell(record){return{record:record,editable:col.editable,dataIndex:col.dataIndex,title:col.title,handleSave:_this2.handleSave};}});});return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Title,{style:{textAlign:'center',fontSize:'2rem',marginTop:'2%'}},\"Users & Roles\"),/*#__PURE__*/React.createElement(Table,{components:components,rowClassName:function rowClassName(){return'editable-row';},bordered:true,dataSource:dataSource,columns:columns}),/*#__PURE__*/React.createElement(UserView,{data:selectedUser,visible:userProfileVisible,close:function close(){_this2.closeUserProfile();}}));}}]);return EditableTable;}(React.Component);export default EditableTable;","map":{"version":3,"sources":["/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/src/views/app-views/journeys/journey-ivr/userRoles/index.js"],"names":["React","useContext","useState","useEffect","useRef","Card","Table","Tag","Tooltip","message","Typography","Button","Input","Form","EyeOutlined","DeleteOutlined","moment","UserView","AvatarStatus","userData","Title","EditableContext","createContext","EditableRow","index","props","useForm","form","EditableCell","title","editable","children","dataIndex","record","handleSave","restProps","editing","setEditing","inputRef","current","focus","toggleEdit","setFieldsValue","save","e","validateFields","values","console","log","childNode","margin","required","paddingRight","EditableTable","columns","render","_","img","name","id","sorter","compare","a","b","toLowerCase","role","length","date","unix","format","lastOnline","phoneNumber","personalInfo","elm","showUserProfile","text","state","dataSource","deleteUser","count","userProfileVisible","selectedUser","userInfo","setState","closeUserProfile","key","filter","item","success","content","duration","handleAdd","newData","address","row","findIndex","splice","components","body","cell","users","map","col","onCell","textAlign","fontSize","marginTop","Component"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from 'react';\nimport { Card, Table, Tag, Tooltip, message, Typography, Button, Input, Form } from 'antd';\nimport { EyeOutlined, DeleteOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport UserView from './UserView';\nimport AvatarStatus from 'components/shared-components/AvatarStatus';\nimport userData from \"assets/data/user-list.data.json\";\n\nconst { Title } = Typography\n\nconst EditableContext = React.createContext();\n\nconst EditableRow = ({ index, ...props }) => {\n  \tconst [form] = Form.useForm();\n  \treturn (\n\t\t<Form form={form} component={false}>\n\t\t\t<EditableContext.Provider value={form}>\n\t\t\t\t<tr {...props} />\n\t\t\t</EditableContext.Provider>\n\t\t</Form>\n  \t);\n};\n\nconst EditableCell = ({ title, editable, children, dataIndex, record, handleSave, ...restProps }) => {\n\n\tconst [editing, setEditing] = useState(false);\n\tconst inputRef = useRef();\n\tconst form = useContext(EditableContext);\n\tuseEffect(() => {\n\t\tif (editing) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}, [editing]);\n\n\tconst toggleEdit = () => {\n\t\tsetEditing(!editing);\n\t\tform.setFieldsValue({\n\t\t\t[dataIndex]: record[dataIndex],\n\t\t});\n\t};\n\n\tconst save = async (e) => {\n\t\ttry {\n\t\tconst values = await form.validateFields();\n\t\ttoggleEdit();\n\t\thandleSave({ ...record, ...values });\n\t\t} catch (errInfo) {\n\t\t\tconsole.log('Save failed:', errInfo);\n\t\t}\n\t};\n\n\tlet childNode = children;\n\n\tif (editable) {\n\t\tchildNode = editing ? (\n\t\t<Form.Item\n\t\t\tstyle={{ margin: 0 }}\n\t\t\tname={dataIndex}\n\t\t\trules={[ { required: true, message: `${title} is required.` } ]}\n\t\t>\n\t\t\t<Input ref={inputRef} onPressEnter={save} onBlur={save} />\n\t\t</Form.Item>\n\t\t) : (\n\t\t<div\n\t\t\tclassName=\"editable-cell-value-wrap\"\n\t\t\tstyle={{ paddingRight: 24 }}\n\t\t\tonClick={toggleEdit}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t\t);\n\t}\n\n  \treturn <td {...restProps}>{childNode}</td>;\n};\n\nclass EditableTable extends React.Component {\n\tcolumns = [\n\t\t{\n\t\t\ttitle: 'User',\n\t\t\tdataIndex: 'name',\n\t\t\trender: (_, record) => (\n\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t<AvatarStatus src={record.img} name={record.name} subTitle={record.id + \"@spocto.com\"}/>\n\t\t\t\t</div>\n\t\t\t),\n\t\t\tsorter: {\n\t\t\t\tcompare: (a, b) => {\n\t\t\t\t\ta = a.name.toLowerCase();\n\t\t\t\t\tb = b.name.toLowerCase();\n\t\t\t\t\treturn a > b ? -1 : b > a ? 1 : 0;\n\t\t\t\t},\n\t\t\t},\n\t\t\teditable: true\n\t\t},\n\t\t{\n\t\t\ttitle: 'Role',\n\t\t\trender: role => (\n\t\t\t\t<Tag className =\"text-capitalize\" color={role.role === 'Admin' ? 'red' : role.role === 'Executive' ? 'blue' : 'cyan' }>{role.role}</Tag>\n\t\t\t),\n\t\t\tsorter: {\n\t\t\t\tcompare: (a, b) => a.role.length - b.role.length,\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ttitle: 'Last online',\n\t\t\tdataIndex: 'lastOnline',\n\t\t\trender: date => (\n\t\t\t\t<Tag color={'magenta'}>{moment.unix(date).format(\"MM/DD/YYYY\")}</Tag>\n\t\t\t),\n\t\t\tsorter: (a, b) => moment(a.lastOnline).unix() - moment(b.lastOnline).unix()\n\t\t},\n\t\t{\n\t\t\ttitle: 'Phone Number',\n\t\t\tdataIndex: 'personalInfo',\n\t\t\trender: role => (\n\t\t\t\t<Tag className =\"text-capitalize\" color={'gold'}>{role.phoneNumber}</Tag>\n\t\t\t),\n\t\t\tsorter: {\n\t\t\t\tcompare: (a, b) => a.personalInfo.phoneNumber.length - b.personalInfo.phoneNumber.length,\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ttitle: 'View User Info',\n\t\t\tdataIndex: 'view',\n\t\t\trender: (_, elm) => (\n\t\t\t\t<Tooltip title=\"View\">\n\t\t\t\t\t<Button type=\"primary\" className=\"mr-2\" icon={<EyeOutlined />} onClick={() => {this.showUserProfile(elm)}} size=\"small\"/>\n\t\t\t\t</Tooltip>\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\ttitle: 'Delete',\n\t\t\tdataIndex: 'delete',\n\t\t\trender: (text, record) =>\n\t\t\tthis.state.dataSource.length >= 1 ? (\n\t\t\t\t<Button danger icon={<DeleteOutlined />} onClick={()=> {this.deleteUser(record.id)}} size=\"small\"/>\n\t\t\t) : null,\n\t\t}\n\t];\n\n\tstate = {\n\t\tdataSource: userData,\n\t\tcount: 2,\n\t\tuserProfileVisible: false,\n\t\tselectedUser: null\n\t};\n\n\tshowUserProfile = userInfo => {\n\t\tthis.setState({\n\t\t\tuserProfileVisible: true,\n\t\t\tselectedUser: userInfo\n\t\t});\n\t};\n\t\n\tcloseUserProfile = () => {\n\t\tthis.setState({\n\t\t\tuserProfileVisible: false,\n\t\t\tselectedUser: null\n    \t});\n\t}\n\n\tdeleteUser = key => {\n\t\tconst dataSource = [...this.state.dataSource];\n\t\tthis.setState({\n\t\t\tdataSource: dataSource.filter(item => item.id !== key),\n\t\t})\n\t\tmessage.success({ content: `Deleted user ${key}`, duration: 2 });\n\t}\n\t\t\n\thandleAdd = () => {\n\t\tconst { count, dataSource } = this.state;\n\t\tconst newData = {\n\t\t\tkey: count,\n\t\t\tname: `Edward King ${count}`,\n\t\t\trole: 'Executive',\n\t\t\taddress: `London, Park Lane no. ${count}`,\n\t\t};\n\t\tthis.setState({\n\t\t\tdataSource: [...dataSource, newData],\n\t\t\tcount: count + 1,\n\t\t});\n\t};\n  \n\thandleSave = (row) => {\n\t\tconst newData = [...this.state.dataSource];\n\t\tconst index = newData.findIndex((item) => row.key === item.key);\n\t\tconst item = newData[index];\n\t\tnewData.splice(index, 1, { ...item, ...row });\n\t\tthis.setState({\n\t\t\tdataSource: newData,\n\t\t});\n\t};\n\n  \trender() {\n\n\t\tconst { dataSource } = this.state;\n\t\tconst components = {\n\t\t\tbody: {\n\t\t\t\trow: EditableRow,\n\t\t\t\tcell: EditableCell,\n\t\t\t},\n\t\t};\n\n\t\tconst { users, userProfileVisible, selectedUser } = this.state;\n\n    \tconst columns = this.columns.map((col) => {\n\t\t\tif (!col.editable) {\n\t\t\t\treturn col;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...col,\n\t\t\t\tonCell: (record) => ({\n\t\t\t\t\trecord,\n\t\t\t\t\teditable: col.editable,\n\t\t\t\t\tdataIndex: col.dataIndex,\n\t\t\t\t\ttitle: col.title,\n\t\t\t\t\thandleSave: this.handleSave,\n\t\t\t\t}),\n\t\t\t};\n\t\t});\n\t\t\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<Title style={{ textAlign: 'center', fontSize: '2rem', marginTop: '2%' }}>Users & Roles</Title>\n\t\t\t\t{/* <Button\n\t\t\t\t\tonClick={this.handleAdd}\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tstyle={{ marginBottom: 16 }}\n\t\t\t\t>\n\t\t\t\t\tAdd a row\n\t\t\t\t</Button> */}\n\t\t\t\t<Table\n\t\t\t\t\tcomponents={components}\n\t\t\t\t\trowClassName={() => 'editable-row'}\n\t\t\t\t\tbordered\n\t\t\t\t\tdataSource={dataSource}\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t/>\n\t\t\t\t<UserView data={selectedUser} visible={userProfileVisible} close={()=> {this.closeUserProfile()}}/>\n\t\t\t</Card>\n\t\t);\n  \t}\n}\n\nexport default EditableTable"]},"metadata":{},"sourceType":"module"}