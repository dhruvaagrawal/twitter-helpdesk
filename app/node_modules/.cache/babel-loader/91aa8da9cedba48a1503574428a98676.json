{"ast":null,"code":"module.exports = loadCAFile;\n\nvar fs = require('fs');\n\nfunction loadCAFile(cafilePath, cb) {\n  if (!cafilePath) return process.nextTick(cb);\n  fs.readFile(cafilePath, 'utf8', afterCARead.bind(this));\n\n  function afterCARead(er, cadata) {\n    if (er) {\n      // previous cafile no longer exists, so just continue on gracefully\n      if (er.code === 'ENOENT') return cb();\n      return cb(er);\n    }\n\n    var delim = '-----END CERTIFICATE-----';\n    var output;\n    output = cadata.split(delim).filter(function (xs) {\n      return !!xs.trim();\n    }).map(function (xs) {\n      return xs.trimLeft() + delim;\n    });\n    this.set('ca', output);\n    cb(null);\n  }\n}","map":null,"metadata":{},"sourceType":"script"}