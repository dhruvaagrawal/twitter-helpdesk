{"ast":null,"code":"'use strict';\n/* eslint-disable camelcase */\n\nmodule.exports = launchSendMetrics;\n\nvar fs = require('graceful-fs');\n\nvar child_process = require('child_process');\n\nif (require.main === module) main();\n\nfunction launchSendMetrics() {\n  var path = require('path');\n\n  var npm = require('../npm.js');\n\n  try {\n    if (!npm.config.get('send-metrics')) return;\n    var cliMetrics = path.join(npm.config.get('cache'), 'anonymous-cli-metrics.json');\n    var targetRegistry = npm.config.get('metrics-registry');\n    fs.statSync(cliMetrics);\n    return runInBackground(__filename, [cliMetrics, targetRegistry]);\n  } catch (ex) {// if the metrics file doesn't exist, don't run\n  }\n}\n\nfunction runInBackground(js, args, opts) {\n  if (!args) args = [];\n  args.unshift(js);\n  if (!opts) opts = {};\n  opts.stdio = 'ignore';\n  opts.detached = true;\n  var child = child_process.spawn(process.execPath, args, opts);\n  child.unref();\n  return child;\n}\n\nfunction main() {\n  var sendMetrics = require('./metrics.js').send;\n\n  var metricsFile = process.argv[2];\n  var metricsRegistry = process.argv[3];\n  sendMetrics(metricsFile, metricsRegistry);\n}","map":null,"metadata":{},"sourceType":"script"}