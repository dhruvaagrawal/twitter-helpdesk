{"ast":null,"code":"import _objectWithoutProperties from\"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React from\"react\";import{Route,Switch,Redirect,withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import AppLayout from\"layouts/app-layout\";import AuthLayout from'layouts/auth-layout';import AppLocale from\"lang\";import{IntlProvider}from\"react-intl\";import{ConfigProvider}from'antd';import{APP_PREFIX_PATH,AUTH_PREFIX_PATH}from'configs/AppConfig';function RouteInterceptor(_ref){var children=_ref.children,isAuthenticated=_ref.isAuthenticated,rest=_objectWithoutProperties(_ref,[\"children\",\"isAuthenticated\"]);return/*#__PURE__*/React.createElement(Route,Object.assign({},rest,{render:function render(_ref2){var location=_ref2.location;return isAuthenticated?children:/*#__PURE__*/React.createElement(Redirect,{to:{pathname:AUTH_PREFIX_PATH,state:{from:location}}});}}));}export var Views=function Views(props){var locale=props.locale,token=props.token,location=props.location;var currentAppLocale=AppLocale[locale];return/*#__PURE__*/React.createElement(IntlProvider,{locale:currentAppLocale.locale,messages:currentAppLocale.messages},/*#__PURE__*/React.createElement(ConfigProvider,{locale:currentAppLocale.antd},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Redirect,{to:APP_PREFIX_PATH})),/*#__PURE__*/React.createElement(Route,{path:AUTH_PREFIX_PATH},/*#__PURE__*/React.createElement(AuthLayout,null)),/*#__PURE__*/React.createElement(RouteInterceptor,{path:APP_PREFIX_PATH,isAuthenticated:token},/*#__PURE__*/React.createElement(AppLayout,{location:location})))));};var mapStateToProps=function mapStateToProps(_ref3){var theme=_ref3.theme,auth=_ref3.auth;var locale=theme.locale;var token=auth.token;return{locale:locale,token:token};};export default withRouter(connect(mapStateToProps)(Views));","map":{"version":3,"sources":["/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/src/views/index.js"],"names":["React","Route","Switch","Redirect","withRouter","connect","AppLayout","AuthLayout","AppLocale","IntlProvider","ConfigProvider","APP_PREFIX_PATH","AUTH_PREFIX_PATH","RouteInterceptor","children","isAuthenticated","rest","location","pathname","state","from","Views","props","locale","token","currentAppLocale","messages","antd","mapStateToProps","theme","auth"],"mappings":"2LAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,QAAxB,CAAkCC,UAAlC,KAAoD,kBAApD,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,MAAtB,CACA,OAASC,YAAT,KAA6B,YAA7B,CACA,OAASC,cAAT,KAA+B,MAA/B,CACA,OAASC,eAAT,CAA0BC,gBAA1B,KAAkD,mBAAlD,CAEA,QAASC,CAAAA,gBAAT,MAAkE,IAAtCC,CAAAA,QAAsC,MAAtCA,QAAsC,CAA5BC,eAA4B,MAA5BA,eAA4B,CAARC,IAAQ,+DAChE,mBACE,oBAAC,KAAD,kBACMA,IADN,EAEE,MAAM,CAAE,0BAAGC,CAAAA,QAAH,OAAGA,QAAH,OACNF,CAAAA,eAAe,CACbD,QADa,cAGb,oBAAC,QAAD,EACE,EAAE,CAAE,CACFI,QAAQ,CAAEN,gBADR,CAEFO,KAAK,CAAE,CAAEC,IAAI,CAAEH,QAAR,CAFL,CADN,EAJI,EAFV,GADF,CAiBD,CAED,MAAO,IAAMI,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,IACtBC,CAAAA,MADsB,CACMD,KADN,CACtBC,MADsB,CACdC,KADc,CACMF,KADN,CACdE,KADc,CACPP,QADO,CACMK,KADN,CACPL,QADO,CAE9B,GAAMQ,CAAAA,gBAAgB,CAAGjB,SAAS,CAACe,MAAD,CAAlC,CACA,mBACE,oBAAC,YAAD,EACE,MAAM,CAAEE,gBAAgB,CAACF,MAD3B,CAEE,QAAQ,CAAEE,gBAAgB,CAACC,QAF7B,eAGE,oBAAC,cAAD,EAAgB,MAAM,CAAED,gBAAgB,CAACE,IAAzC,eACE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,eACE,oBAAC,QAAD,EAAU,EAAE,CAAEhB,eAAd,EADF,CADF,cAIE,oBAAC,KAAD,EAAO,IAAI,CAAEC,gBAAb,eACE,oBAAC,UAAD,MADF,CAJF,cAOE,oBAAC,gBAAD,EAAkB,IAAI,CAAED,eAAxB,CAAyC,eAAe,CAAEa,KAA1D,eACE,oBAAC,SAAD,EAAW,QAAQ,CAAEP,QAArB,EADF,CAPF,CADF,CAHF,CADF,CAmBD,CAtBM,CAyBP,GAAMW,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,OAAqB,IAAlBC,CAAAA,KAAkB,OAAlBA,KAAkB,CAAXC,IAAW,OAAXA,IAAW,IACnCP,CAAAA,MADmC,CACvBM,KADuB,CACnCN,MADmC,IAEnCC,CAAAA,KAFmC,CAEzBM,IAFyB,CAEnCN,KAFmC,CAG3C,MAAO,CAAED,MAAM,CAANA,MAAF,CAAUC,KAAK,CAALA,KAAV,CAAP,CACD,CAJD,CAMA,cAAepB,CAAAA,UAAU,CAACC,OAAO,CAACuB,eAAD,CAAP,CAAyBP,KAAzB,CAAD,CAAzB","sourcesContent":["import React from \"react\";\r\nimport { Route, Switch, Redirect, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport AppLayout from \"layouts/app-layout\";\r\nimport AuthLayout from 'layouts/auth-layout';\r\nimport AppLocale from \"lang\";\r\nimport { IntlProvider } from \"react-intl\";\r\nimport { ConfigProvider } from 'antd';\r\nimport { APP_PREFIX_PATH, AUTH_PREFIX_PATH } from 'configs/AppConfig'\r\n\r\nfunction RouteInterceptor({ children, isAuthenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: AUTH_PREFIX_PATH,\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport const Views = (props) => {\r\n  const { locale, token, location } = props;\r\n  const currentAppLocale = AppLocale[locale];\r\n  return (\r\n    <IntlProvider\r\n      locale={currentAppLocale.locale}\r\n      messages={currentAppLocale.messages}>\r\n      <ConfigProvider locale={currentAppLocale.antd}>\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Redirect to={APP_PREFIX_PATH} />\r\n          </Route>\r\n          <Route path={AUTH_PREFIX_PATH}>\r\n            <AuthLayout />\r\n          </Route>\r\n          <RouteInterceptor path={APP_PREFIX_PATH} isAuthenticated={token}>\r\n            <AppLayout location={location}/>\r\n          </RouteInterceptor>\r\n        </Switch>\r\n      </ConfigProvider>\r\n    </IntlProvider>\r\n  )\r\n}\r\n\r\n\r\nconst mapStateToProps = ({ theme, auth }) => {\r\n  const { locale } =  theme;\r\n  const { token } = auth;\r\n  return { locale, token }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(Views));"]},"metadata":{},"sourceType":"module"}