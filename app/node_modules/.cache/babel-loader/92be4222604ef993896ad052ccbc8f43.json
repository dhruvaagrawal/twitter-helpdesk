{"ast":null,"code":"module.exports = chain;\n\nvar bindActor = require(\"./bind-actor.js\");\n\nchain.first = {};\nchain.last = {};\n\nfunction chain(things, cb) {\n  var res = [];\n\n  (function LOOP(i, len) {\n    if (i >= len) return cb(null, res);\n    if (Array.isArray(things[i])) things[i] = bindActor.apply(null, things[i].map(function (i) {\n      return i === chain.first ? res[0] : i === chain.last ? res[res.length - 1] : i;\n    }));\n    if (!things[i]) return LOOP(i + 1, len);\n    things[i](function (er, data) {\n      if (er) return cb(er, res);\n      if (data !== undefined) res = res.concat(data);\n      LOOP(i + 1, len);\n    });\n  })(0, things.length);\n}","map":null,"metadata":{},"sourceType":"script"}