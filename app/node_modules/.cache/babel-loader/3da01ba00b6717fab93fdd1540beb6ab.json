{"ast":null,"code":"var _jsxFileName = \"/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/src/views/app-views/ops-admin/FileUploadForm.js\";\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { message, Typography, Form, Button, Checkbox, Row, Col, Select } from 'antd';\nimport { CloudUploadOutlined, LeftCircleOutlined, RightCircleOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { ES_BASE_URL, ES_BULK_QUERY, ES_PASSWORD, ES_USERNAME } from 'constants/ApiConstant';\nimport readXlsxFile from 'read-excel-file';\nimport { StyledButton, StyledNavButton } from 'constants/StyledComponents';\nconst {\n  Title\n} = Typography;\nconst {\n  Option\n} = Select;\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  }\n});\n\nconst FileUploadForm = props => {\n  console.log(props); // ---------------------------- VARIABLE ASSIGNMENT ---------------------------- //\n\n  let fileReader;\n  let newArr = [];\n  let checkedLanguages = [];\n  let selectedOptions = [];\n  const [file, setFile] = useState(null);\n  const [rows, setRows] = useState(null);\n  const [visible, setVisible] = useState(false); // const [ show, setShow ] = useState(false)\n\n  const [buttonVisible, setButtonVisible] = useState(true);\n  const [checked, setChecked] = useState(false);\n  const [createTable, setCreateTable] = useState([]);\n  const [languages, setLanguages] = useState([]);\n  const classes = useStyles(); // Create a reference to the hidden file input element\n\n  const hiddenFileInput = React.useRef(null);\n  const formItemLayout = {\n    labelCol: {\n      span: 6\n    },\n    wrapperCol: {\n      span: 14\n    }\n  };\n  const map = {\n    'Product': 'product',\n    'Segment': 'segment',\n    'Type': 'type',\n    'Level': 'level',\n    'Category': 'category',\n    'Content': 'content',\n    'Vendor': 'vendor',\n    'Languages': 'languages',\n    'Status': 'status'\n  }; // --------------------------------------------------------------------- //\n  // ------------------------ FUNCTION ASSIGNMENT ------------------------ //\n  // --------------------------------------------------------------------- //\n\n  const showButtons = () => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledButton, {\n      onClick: handleClick,\n      style: {\n        marginTop: '7.5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CloudUploadOutlined, {\n      style: {\n        marginRight: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 85\n      }\n    }), \" Upload File\"), /*#__PURE__*/React.createElement(Row, {\n      style: {\n        marginTop: '12.5%',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(StyledNavButton, {\n      style: {\n        marginRight: '3%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(LeftCircleOutlined, {\n      style: {\n        marginRight: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 67\n      }\n    }), \"Go to recommendations\"), /*#__PURE__*/React.createElement(StyledNavButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }, \"Go to transactions\", /*#__PURE__*/React.createElement(RightCircleOutlined, {\n      style: {\n        marginLeft: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 56\n      }\n    }))));\n  };\n\n  const handleClick = () => {\n    hiddenFileInput.current.click();\n  };\n\n  const onChange = async e => {\n    e.preventDefault();\n    let tableArray = [];\n    const formData = new FormData();\n    setFile(e.target.files[0]);\n    await readXlsxFile(e.target.files[0], {\n      map\n    }).then(async ({\n      rows\n    }) => {\n      rows.forEach(row => (row.language = languages, row.status = 'Client Approved', row.last_updated_on = new Date(), row.last_updated_by = 'Dhruva Agrawal', console.log(new Date())));\n      formData.append('client_data', rows);\n      props.esData(rows);\n      console.log(formData);\n      await axios({\n        method: 'post',\n        baseURL: ES_BASE_URL,\n        url: ES_BULK_QUERY,\n        data: '',\n        auth: {\n          username: ES_USERNAME,\n          password: ES_PASSWORD\n        }\n      }).then(res => console.log(`Connection with STATUS ${res.status} has been established.`)).catch(function (err) {\n        if (err.response) {\n          console.log(err.response);\n          console.log(err.response.data);\n          console.log(err.response.status);\n          console.log(err.response.headers);\n        } else if (err.request) {\n          console.log(err.request);\n        } else {\n          console.log('Error', err.message);\n        }\n\n        console.log(err.config);\n      });\n    }); // .then( function(res) {\n    //     for (let i = 0; i < 3; i++) {\n    //         tableArray.push(res[i])\n    //     } \n    //     console.log(tableArray)\n    //     setCreateTable(tableArray)\n    //     setVisible(true)\n    //     setButtonVisible(false)\n    // })\n  }; // const uploadFile = async (file) => {\n  //     const formData = new FormData();\n  //     formData.append('file', file)\n  //     let res =  await axios.post(FILE_UPLOAD_URL, formData, {\n  //         headers: {\n  //             'content-type': 'multipart/form-data'\n  //         }\n  // \t})\n  // \treturn res\n  // }\n\n\n  const onSubmit = async e => {// let res = await uploadFile(file);\n    // console.log(res.data);\n    // checkedLanguages = []\n    // selectedOptions = []\n    // message.success('Your file was successfully submitted and is now being processed')\n  };\n\n  const onCheck = event => {\n    checkedLanguages.push(event.target.value);\n    setLanguages(prevLanguages => prevLanguages.concat(checkedLanguages));\n  }; // const onSelect = event => {\n  //     selectedOptions.push(event.value)\n  //     console.log(selectedOptions)\n  // }\n\n\n  const renderLanguages = () => {\n    const languages = ['English', 'Hindi', 'Tamil', 'Telugu', 'Kannada', 'Marathi', 'Gujarati', 'Bengali', 'Punjabi', 'Malayalam'];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"language\",\n      label: \"Language\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, languages.map(language => /*#__PURE__*/React.createElement(Checkbox.Group, {\n      className: \"pl-3 mt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      value: language,\n      style: {\n        lineHeight: '32px'\n      },\n      onChange: onCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 37\n      }\n    }, language))))));\n  }; // const showTableHeaders = array => {\n  //     newArr = array[0]\n  //     console.log(newArr)\n  //     return (\n  //         <>\n  //         { newArr.map( (num, index) => (\n  //             <Form.Item\n  //                 name={ num }\n  //                 label={ num }\n  //                 hasFeedback\n  //             >\n  //                 <Row>\n  //                     <Select key={ index } labelInValue placeholder={`Please enter ${ num }`} onSelect={ onSelect }>\n  //                         { newArr.map( (num, index) => {\n  //                             return <Option key={ index } value={ num }>{ num }</Option>\n  //                         }) }\n  //                     </Select>\n  //                 </Row>\n  //             </Form.Item>\n  //         ))}\n  //         </>\n  //     )\n  // }\n  // --------------------------------------------------------------------- //\n  // --------------------------------------------------------------------- //\n  // --------------------------------------------------------------------- //\n\n\n  return /*#__PURE__*/React.createElement(Form, Object.assign({\n    name: \"validate_other\"\n  }, formItemLayout, {\n    onFinish: onSubmit,\n    textAlign: \"center\",\n    style: buttonVisible ? {\n      height: '500px'\n    } : {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    justify: \"center\",\n    style: {\n      textAlign: 'center',\n      marginTop: '1%',\n      marginBottom: '1%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    level: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, \"Upload Transactions\")), /*#__PURE__*/React.createElement(Form.Item, {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, checked && /*#__PURE__*/React.createElement(Button, {\n    htmlType: \"submit\",\n    variant: \"contained\",\n    type: \"primary\",\n    style: {\n      width: '100%',\n      height: '3rem',\n      fontSize: '1.45rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 30\n    }\n  }, \"Create Transactions\")), /*#__PURE__*/React.createElement(Form.Item, {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: onChange,\n    ref: hiddenFileInput,\n    style: {\n      display: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 8\n    }\n  }), buttonVisible ? showButtons() : /*#__PURE__*/React.createElement(Title, {\n    level: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 51\n    }\n  }, \"Please map the headings\")), /*#__PURE__*/React.createElement(Form.Item, {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, renderLanguages())), /*#__PURE__*/React.createElement(Form.Item, {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 4\n    }\n  }, visible && /*#__PURE__*/React.createElement(Button, {\n    htmlType: \"submit\",\n    variant: \"contained\",\n    type: \"primary\",\n    style: {\n      width: '100%',\n      height: '3rem',\n      fontSize: '1.45rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 30\n    }\n  }, \"Create Transactions\")), console.log(createTable));\n};\n\nexport default FileUploadForm;","map":{"version":3,"sources":["/Users/dhruvaagrawal/Desktop/Work/Spocto/CMS/app/src/views/app-views/ops-admin/FileUploadForm.js"],"names":["React","useState","makeStyles","message","Typography","Form","Button","Checkbox","Row","Col","Select","CloudUploadOutlined","LeftCircleOutlined","RightCircleOutlined","axios","ES_BASE_URL","ES_BULK_QUERY","ES_PASSWORD","ES_USERNAME","readXlsxFile","StyledButton","StyledNavButton","Title","Option","useStyles","table","minWidth","FileUploadForm","props","console","log","fileReader","newArr","checkedLanguages","selectedOptions","file","setFile","rows","setRows","visible","setVisible","buttonVisible","setButtonVisible","checked","setChecked","createTable","setCreateTable","languages","setLanguages","classes","hiddenFileInput","useRef","formItemLayout","labelCol","span","wrapperCol","map","showButtons","handleClick","marginTop","marginRight","display","justifyContent","alignItems","marginLeft","current","click","onChange","e","preventDefault","tableArray","formData","FormData","target","files","then","forEach","row","language","status","last_updated_on","Date","last_updated_by","append","esData","method","baseURL","url","data","auth","username","password","res","catch","err","response","headers","request","config","onSubmit","onCheck","event","push","value","prevLanguages","concat","renderLanguages","lineHeight","height","textAlign","marginBottom","width","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { makeStyles } from '@material-ui/core/styles';\nimport { message, Typography, Form, Button, Checkbox, Row, Col, Select } from 'antd'\nimport { CloudUploadOutlined, LeftCircleOutlined, RightCircleOutlined } from '@ant-design/icons'\nimport axios from 'axios'\nimport { ES_BASE_URL, ES_BULK_QUERY, ES_PASSWORD, ES_USERNAME } from 'constants/ApiConstant'\nimport readXlsxFile from 'read-excel-file'\nimport { StyledButton, StyledNavButton } from 'constants/StyledComponents'\n\nconst { Title } = Typography\nconst { Option } = Select\n\nconst useStyles = makeStyles({\n    table: {\n        minWidth: 650,\n    },\n});\n\nconst FileUploadForm = props => {\n\n    console.log(props)\n\n    // ---------------------------- VARIABLE ASSIGNMENT ---------------------------- //\n\n    let fileReader;\n\n    let newArr = []\n\n    let checkedLanguages = []\n    let selectedOptions = []\n\n    const [ file, setFile ] = useState(null)\n    const [ rows, setRows ] = useState(null)\n    const [ visible, setVisible ] = useState(false)\n    // const [ show, setShow ] = useState(false)\n    const [ buttonVisible, setButtonVisible ] = useState(true)\n    const [ checked, setChecked ] = useState(false)\n    const [ createTable, setCreateTable ] = useState([])\n    const [ languages, setLanguages ] = useState([])\n\n    const classes = useStyles()\n\n    // Create a reference to the hidden file input element\n    const hiddenFileInput = React.useRef(null);\n\n    const formItemLayout = {\n        labelCol: {\n            span: 6,\n        },\n        wrapperCol: {\n            span: 14,\n        },\n    }; \n\n    const map = {\n        'Product': 'product',\n        'Segment': 'segment',\n        'Type': 'type',\n        'Level': 'level',\n        'Category': 'category',\n        'Content': 'content',\n        'Vendor': 'vendor',\n        'Languages': 'languages',\n        'Status': 'status'\n    }\n\n\n    // --------------------------------------------------------------------- //\n    // ------------------------ FUNCTION ASSIGNMENT ------------------------ //\n    // --------------------------------------------------------------------- //\n\n    const showButtons = () => {\n\n        return (\n            <>\n                <StyledButton onClick={ handleClick } style={{ marginTop: '7.5%' }}><CloudUploadOutlined style={{ marginRight: '2%' }} /> Upload File</StyledButton>\n                <Row style={{ marginTop: '12.5%', display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\n                    <StyledNavButton style={{ marginRight: '3%'}}><LeftCircleOutlined style={{ marginRight: '2%' }} />Go to recommendations</StyledNavButton>\n                    <StyledNavButton>Go to transactions<RightCircleOutlined style={{ marginLeft: '2%' }} /></StyledNavButton>\n                </Row>\n            </>\n        )\n    }\n\n    const handleClick = () => {\n        hiddenFileInput.current.click()\n    }\n\t\n    const onChange = async (e) => {\n        e.preventDefault()\n        let tableArray = []\n        const formData = new FormData();\n        setFile(e.target.files[0])\n        await readXlsxFile(e.target.files[0], { map })\n        .then( async ({ rows }) => {\n            rows.forEach( row => (\n                row.language = languages,\n                row.status = 'Client Approved',\n                row.last_updated_on = new Date(),\n                row.last_updated_by = 'Dhruva Agrawal',\n                console.log(new Date)\n            ))\n            formData.append('client_data', rows)\n            props.esData(rows)\n            console.log(formData)\n            await axios({\n                method: 'post',\n                baseURL: ES_BASE_URL,\n                url: ES_BULK_QUERY,\n                data: '',\n                auth: {\n                    username: ES_USERNAME,\n                    password: ES_PASSWORD\n                }\n            })\n            .then( res => console.log(`Connection with STATUS ${res.status} has been established.`))\n            .catch( function(err) {\n                if (err.response) {\n                    console.log(err.response)\n                    console.log(err.response.data)\n                    console.log(err.response.status)\n                    console.log(err.response.headers)\n                } else if (err.request) {\n                    console.log(err.request)\n                } else {\n                    console.log('Error', err.message);\n                }\n                console.log(err.config);\n            })\n        })\n        // .then( function(res) {\n        //     for (let i = 0; i < 3; i++) {\n        //         tableArray.push(res[i])\n        //     } \n        //     console.log(tableArray)\n        //     setCreateTable(tableArray)\n        //     setVisible(true)\n        //     setButtonVisible(false)\n        // })\n    }\n\n    // const uploadFile = async (file) => {\n\n    //     const formData = new FormData();\n        \n    //     formData.append('file', file)\n        \n    //     let res =  await axios.post(FILE_UPLOAD_URL, formData, {\n    //         headers: {\n    //             'content-type': 'multipart/form-data'\n    //         }\n\t// \t})\n\t// \treturn res\n    // }\n    \n    const onSubmit = async (e) => {\n        // let res = await uploadFile(file);\n        // console.log(res.data);\n        // checkedLanguages = []\n        // selectedOptions = []\n        // message.success('Your file was successfully submitted and is now being processed')\n\t}\n      \n    const onCheck = event => {\n        checkedLanguages.push(event.target.value)\n        setLanguages(prevLanguages => prevLanguages.concat(checkedLanguages))\n    }\n\n    // const onSelect = event => {\n    //     selectedOptions.push(event.value)\n    //     console.log(selectedOptions)\n    // }\n    \n    const renderLanguages = () => {\n        const languages = ['English', 'Hindi', 'Tamil', 'Telugu', 'Kannada', 'Marathi', 'Gujarati', 'Bengali', 'Punjabi', 'Malayalam']\n\n        return (\n            <>\n                <Form.Item name=\"language\" label=\"Language\">\n                        { languages.map( language => (\n                            <Checkbox.Group className=\"pl-3 mt-1\">\n                                <Col>\n                                    <Checkbox value={ language } style={{ lineHeight: '32px' }} onChange={ onCheck }>{ language }</Checkbox>\n                                </Col>\n                            </Checkbox.Group>\n                        )) }\n                </Form.Item>\n            </>\n        )\n    }\n    \n    // const showTableHeaders = array => {\n\n    //     newArr = array[0]\n\n    //     console.log(newArr)\n        \n    //     return (\n    //         <>\n    //         { newArr.map( (num, index) => (\n    //             <Form.Item\n    //                 name={ num }\n    //                 label={ num }\n    //                 hasFeedback\n    //             >\n    //                 <Row>\n    //                     <Select key={ index } labelInValue placeholder={`Please enter ${ num }`} onSelect={ onSelect }>\n    //                         { newArr.map( (num, index) => {\n    //                             return <Option key={ index } value={ num }>{ num }</Option>\n    //                         }) }\n    //                     </Select>\n    //                 </Row>\n    //             </Form.Item>\n    //         ))}\n    //         </>\n    //     )\n    // }\n\n    // --------------------------------------------------------------------- //\n    // --------------------------------------------------------------------- //\n    // --------------------------------------------------------------------- //\n\n\treturn (\n        <Form\n            name=\"validate_other\"\n            { ...formItemLayout }\n            onFinish={ onSubmit }\n            textAlign=\"center\"\n            style={ buttonVisible ? { height: '500px' } : { height: '100%' }}\n        >\n\t\t\t<Form.Item justify=\"center\" style={{ textAlign: 'center', marginTop: '1%', marginBottom: '1%' }}>\n                <Title level={1}>Upload Transactions</Title>\n            </Form.Item>\n            <Form.Item style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                { checked && <Button htmlType=\"submit\" variant=\"contained\" type=\"primary\" style={{ width: '100%', height: '3rem', fontSize: '1.45rem' }}>Create Transactions</Button> }\n            </Form.Item>\n            <Form.Item style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', textAlign: 'center' }}>\n\t\t\t    <input type=\"file\" onChange={ onChange } ref={ hiddenFileInput }  style={{ display: 'none' }} />\n                { buttonVisible ? showButtons() : <Title level={3}>Please map the headings</Title>}\n            </Form.Item>\n            <Form.Item style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }} className=\"mt-5\">\n                <Row>\n                    { renderLanguages() }\n                </Row>\n            </Form.Item>\n            {/* <Form.Item style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }} className=\"mt-5\">\n                    <Row>\n                        { visible && showTableHeaders(createTable) }\n                    </Row>\n            </Form.Item> */}\n\t\t\t<Form.Item style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                { visible && <Button htmlType=\"submit\" variant=\"contained\" type=\"primary\" style={{ width: '100%', height: '3rem', fontSize: '1.45rem' }}>Create Transactions</Button> }\n            </Form.Item>\n            { console.log(createTable) }\n\t\t</Form>\n\t)\n        \n}\nexport default FileUploadForm"]},"metadata":{},"sourceType":"module"}